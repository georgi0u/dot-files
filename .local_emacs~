;; =========== C++ Awesomrey ==================
(defun switch-source-file() 
  "Switch from .h to .cxx in Pub-style directories" 
  (interactive) 
  (let ((myfile "")) 
    (if (equal (substring buffer-file-name -4 nil) ".cxx") 
        (progn (setq myfile (concat (substring buffer-file-name 0 -4) ".h")) 
               (switch-to-buffer (file-name-nondirectory myfile)) 
               (if (not buffer-file-name) 
                   (find-alternate-file (concat "../include/" (file-name-nondirectory myfile))))) 
      (if (equal (substring buffer-file-name -2 nil) ".h") 
          (progn (setq myfile (concat (substring buffer-file-name 0 -2) ".cxx")) 
                 (switch-to-buffer (file-name-nondirectory myfile)) 
                 (if (not buffer-file-name) 
                     (find-alternate-file (concat "../src/" (file-name-nondirectory myfile))))) 
        (if (equal (substring buffer-file-name -8 nil) "Pintfile") 
            (progn (setq myfile "Pubfile") 
                   (switch-to-buffer (file-name-nondirectory myfile)) 
                   (if (not buffer-file-name) 
                       (find-alternate-file (file-name-nondirectory myfile)))) 
          (if (equal (substring buffer-file-name -7 nil) "Pubfile") 
              (progn (setq myfile "Pintfile") 
                     (switch-to-buffer (file-name-nondirectory myfile)) 
                     (if (not buffer-file-name) 
                         (find-alternate-file (file-name-nondirectory myfile))))))) 
      buffer-file-name))) 

(global-set-key "\C-Xz" 'switch-source-file)


;; ======== p4 and pub ===================
(load "pub")
(load "p4")
(add-hook 'pub-mode-hook 'turn-on-font-lock)
(add-hook 'pint-mode-hook 'turn-on-font-lock)
